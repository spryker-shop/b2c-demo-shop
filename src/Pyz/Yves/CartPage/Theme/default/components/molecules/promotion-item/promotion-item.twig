{% extends molecule('card') %}

{% define config = {
    name: 'promotion-item',
    tag: 'article'
} %}

{% define data = {
    name: required,
    abstractId: required,
    url: required,
    imageUrl: required,
    price: required,
    originalPrice: null
} %}

{% block body %}
    <div class="{{config.name}}__container shopping-cart__box grid grid--justify grid--middle grid--no-wrap">
        <div class="{{ config.name }}__thumbnail">
            {% block image %}
                <a href="{{ data.url }}" class="{{ config.name }}__overlay">
                    {% include atom('thumbnail') with {
                        modifiers: ['small', 'marginless'],
                        attributes: {
                            alt: data.name,
                            src: data.imageUrl,
                            title: data.name
                        }
                    } only %}
                </a>
            {% endblock %}
            {% block labels %}
                {{ widget('ProductAbstractLabelWidgetPlugin', data.abstractId) }}
            {% endblock %}
            {% block groups %}
                {{ widget('ProductGroupWidgetPlugin', data.abstractId) }}
            {% endblock %}
        </div>
        <div class="{{ config.name }}__content col">
            {% block content %}
                <a href="{{ data.url }}" class="{{ config.name }}__info grid grid--justify">
                    {% block name %}
                        <div class="col col--md-8 col--sm-12">
                            <span class="{{ config.name }}__name">{{ data.name }}</span>
                        </div>
                    {% endblock %}

                    {% block price %}
                        <div class="col col--md-4 col--sm-12">
                            {% include molecule('price') with {
                                class: config.name ~ '__price',
                                data: {
                                    amount: data.price | money,
                                    originalAmount: data.originalPrice is empty ? null : (data.originalPrice | money)
                                }
                            } only %}
                        </div>
                    {% endblock %}
                </a>
            {% endblock %}
            {% block actions %}{% endblock %}
        </div>
    </div>

{% endblock %}
