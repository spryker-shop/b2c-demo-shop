{% extends template('page-layout-main') %}

{% define data = {
    product: _view.product,
    productUrl: _view.productUrl,

    title: product.metaTitle | default(_view.product.name),
    metaTitle: product.metaTitle | default(_view.product.name),
    metaDescription: _view.product.metaDescription | default,
    metaKeywords: _view.product.metaKeywords | default
} %}

{% block container %}
    <div class="container">
        {% block pageInfo %}

            {% block title %}
                <h3 class="main-title text-left">{{data.title}}</h3>
                <link itemprop="url" href="{{ data.productUrl }}" />
            {% endblock %}
        {% endblock %}

        <main>
            {% block content %}
                <div class="grid">
                    <div class="col col--sm-12 col--lg-7 col--xl-8">
                        {% include molecule('product-carousel', 'ProductDetailPage') with {
                            class: 'box',
                            data: {
                                product: data.product
                            }
                        } only %}
                    </div>

                    <div class="col col--sm-12 col--lg-5 col--xl-4">
                        {% include molecule('product-configurator', 'ProductDetailPage') with {
                            class: 'box',
                            data: {
                                product: data.product
                            }
                        } only %}
                    </div>
                </div>

                {% include molecule('product-detail', 'ProductDetailPage') with {
                    class: 'box spacing-top--big',
                    data: {
                        description: data.product.description,
                        attributes: data.product.attributes
                    }
                } only %}

                {{ widget('ProductReviewWidgetPlugin', data.product.idProductAbstract) }}
                {{ widget('SimilarProductsWidgetPlugin', data.product) }}
                {{ widget('ProductCmsBlockWidgetPlugin', data.product) }}

                {% block breadcrumbs %}
                    {{ widget('ProductCategoryWidgetPlugin', data.product, app.locale) }}
                {% endblock %}
            {% endblock %}
        </main>
    </div>
{% endblock %}
